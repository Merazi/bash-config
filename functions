# ; -*- shell-script -*-

#######
# Bash functions file, by Merazi
###

# this function upgrades all the pip installed packages
function pip-upgrade ()
{
    pip3 list --outdated --format=freeze \
	| grep -v '^\-e' | cut -d = -f 1 \
	| xargs -n1 pip3 install -U
}

# this function doesn't get any value, it just cleans residual packages
function clean-apt ()
{
    dpkg -l |              \
	grep ^rc |         \
	awk '{print $2}' | \
	xargs sudo apt purge -y
}

# returns my ip address (even tho I can see it on polybar too)
function my-ip ()
{
    MY_IP=$(/usr/sbin/ifconfig eno1 | awk '/inet/ { print $2 } ' | sed -e s/addr://)
    echo ${MY_IP:-"Not connected"}
}

# this converts webm video/audio to ogg audio
function webm-to-ogg ()
{
    for file in *.webm; do
	ffmpeg -i "$file" -vn -y "$file.ogg";
    done
}

# this function plays all the music files on a directory using ffplay
# it also shuffles the order of the music files
function shuffle-play ()
{
    find . -type f -name "*.$1" | shuf | \
	while read f; do
	    ffplay -nodisp -autoexit -- "$f";
	done
}

# hacker mode (just something fun to play around with)
function hacker-mode ()
{
    if [ $1 -ne 0 ]; then
	# activate hacker mode
	gsettings set io.elementary.terminal.settings background "rgba(00, 00, 00, 0.9)"
	gsettings set io.elementary.terminal.settings foreground lime
	gsettings set io.elementary.terminal.settings font "Cascadia Code"
    else
	# deactivate hacker mode
	gsettings reset io.elementary.terminal.settings background
	gsettings reset io.elementary.terminal.settings foreground
	gsettings reset io.elementary.terminal.settings font
    fi
}
